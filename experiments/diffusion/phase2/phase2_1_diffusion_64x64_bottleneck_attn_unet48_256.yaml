experiment:
  name: phase2_1_diffusion_64x64_bottleneck_attn_unet48_256
  phase: phase2_1_diffusion
  save_path: /work3/s233249/ImgiNav/experiments/phase2/phase2_1_diffusion_64x64_bottleneck_attn_unet48_256
  epochs_target: 500
dataset:
  manifest: /work3/s233249/ImgiNav/experiments/phase2/phase2_1_diffusion_64x64_bottleneck_attn_unet48_256/embeddings/manifest_with_latents.csv
  outputs:
    latent: latent_path
    type: type  # Room/scene conditioning: "room" -> 0, "scene" -> 1
  filters:
    is_empty:
    - false
  return_path: false
autoencoder:
  checkpoint: /work3/s233249/ImgiNav/experiments/phase2/phase2_1_AE_64x64_structural_256/phase2_1_AE_64x64_structural_256_checkpoint_best.pt
  frozen: true
unet:
  type: UnetWithAttention
  in_channels: 4
  out_channels: 4
  base_channels: 48
  depth: 3
  num_res_blocks: 2
  time_dim: 128
  cond_channels: 0
  fusion_mode: none
  cond_dim: 128  # Condition embedding dimension (same as time_dim)
  num_cond_classes: 2  # ROOM=0, SCENE=1
  norm_groups: 8
  dropout: 0.2
  use_attention: true
  attention_heads: null
  attention_at:
  - bottleneck
scheduler:
  type: LinearScheduler
  num_steps: 500
training:
  seed: 42
  train_split: 0.8
  split_seed: 42
  batch_size: 128
  num_workers: 8
  shuffle: true
  epochs: 500
  learning_rate: 0.00015
  optimizer: AdamW
  weight_decay: 0.15
  save_interval: 99999
  eval_interval: 5
  sample_interval: 5
  use_amp: false
  use_weighted_sampling: false
  max_grad_norm: 0.5
  early_stopping_patience: 20
  early_stopping_min_delta: 1.0e-05
  use_non_uniform_sampling: true
  scheduler:
    type: linear
  loss:
    type: CompositeLoss
    losses:
    - type: SNRWeightedNoiseLoss
      key: pred_noise
      target: noise
      weight: 1.0
