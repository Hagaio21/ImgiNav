experiment:
  name: diffusion_ablation_capacity_unet64_d5
  phase: diffusion_ablation
  save_path: /work3/s233249/ImgiNav/experiments/diffusion/ablation/capacity_unet64_d5
  epochs_target: 1000
dataset:
  manifest: /work3/s233249/ImgiNav/datasets/layouts_latents.csv  # Manifest with latent_path column (created by preembed_latents.py)
  outputs:
    latent: latent_path  # Use pre-embedded latents for faster training
  filters:
    is_empty:
    - false
  return_path: false
autoencoder:
  encoder:
    in_channels: 3
    latent_channels: 16
    base_channels: 32
    downsampling_steps: 4
    activation: SiLU
    norm_groups: 8
    variational: false
    frozen: true
  decoder:
    latent_channels: 16
    base_channels: 32
    upsampling_steps: 4
    activation: SiLU
    norm_groups: 8
    heads:
    - type: RGBHead
      name: rgb
      out_channels: 3
      final_activation: tanh
    - type: SegmentationHead
      name: segmentation
      num_classes: 10
    frozen: true
  frozen: true
unet:
  in_channels: 16
  out_channels: 16
  base_channels: 64
  depth: 5
  num_res_blocks: 2
  time_dim: 128
  cond_channels: 0
  fusion_mode: none
  norm_groups: 8
scheduler:
  type: CosineScheduler
  num_steps: 1000
training:
  seed: 42
  train_split: 0.8
  split_seed: 42
  batch_size: 8
  num_workers: 8
  shuffle: true
  epochs: 500
  learning_rate: 0.0001
  optimizer: AdamW
  weight_decay: 0.01
  save_interval: 99999
  eval_interval: 5
  sample_interval: 10
  early_stopping_patience: 10
  early_stopping_min_delta: 0.0001
  early_stopping_restore_best: true
  use_amp: true
  scheduler:
    type: cosine
  loss:
    type: MSELoss
    key: pred_noise
    target: noise
    weight: 1.0
